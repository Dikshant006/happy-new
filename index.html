<!--
Happy Diwali Single-File Landing Page
Features:
- Full-screen animated Diwali video background
- Initial form to collect visitor name
- After submit, shows a "рк╕рк╛рк▓ркорлБркмрк╛рк░ркХ" greeting card with the entered name
- Plays background music (starts after user interaction to avoid autoplay block)
- Mute/unmute and replay controls
- Responsive + modern professional styling (glassmorphism)

How to use:
1. Replace `assets/diwali-video.mp4` with your background video (or a hosted URL).
2. Replace `assets/diwali-music.mp3` with your music file (or a hosted URL).
3. Save this file as `index.html` and open it in a browser. (Because audio autoplay is blocked on many browsers, the music will start after you submit the name.)

Note: Keep both video and audio files small / optimized for web for fast loading.
-->

<!doctype html>
<html lang="gu">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Happy Diwali тАФ рк╕рк▓рк╛ркорлБркмрк╛рк░ркХ</title>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&family=Rubik:wght@400;600&display=swap"
        rel="stylesheet">
    <style>
        :root {
            --glass-bg: rgba(255, 255, 255, 0.08);
            --glass-border: rgba(255, 255, 255, 0.18);
            --accent: #ffb74d;
            --accent-2: #ff6f61;
            --card-radius: 18px;
            --max-width: 980px;
        }

        * {
            box-sizing: border-box
        }

        html,
        body {
            height: 100%
        }

        body {
            margin: 0;
            font-family: 'Poppins', system-ui, Segoe UI, Roboto, 'Helvetica Neue', Arial;
            color: #fff;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            overflow: hidden;
        }

        /* Background video full-screen */
        .bg-video {
            position: fixed;
            inset: 0;
            z-index: -2;
            object-fit: cover;
            width: 100%;
            height: 100%;
            filter: brightness(0.65) contrast(1.05);
        }

        .bg-fallback {
            position: fixed;
            inset: 0;
            z-index: -3;
            background: linear-gradient(180deg, #1b1b2f 0%, #2b0633 100%);
        }

        /* soft animated overlay */
        .overlay {
            position: fixed;
            inset: 0;
            z-index: -1;
            background: linear-gradient(180deg, rgba(0, 0, 0, 0.25), rgba(0, 0, 0, 0.45));
        }

        .container {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 32px;
        }

        .card {
            width: 100%;
            max-width: var(--max-width);
            border-radius: var(--card-radius);
            padding: 28px;
            backdrop-filter: blur(8px) saturate(120%);
            background: linear-gradient(180deg, rgba(255, 255, 255, 0.03), rgba(255, 255, 255, 0.02));
            border: 1px solid var(--glass-border);
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.5);
            display: flex;
            gap: 28px;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
        }

        /* Left: form area */
        .form-area {
            flex: 1;
            min-width: 260px
        }

        .title {
            font-family: 'Rubik', sans-serif;
            font-size: 28px;
            margin: 0 0 8px 0;
            letter-spacing: 0.3px
        }

        .subtitle {
            margin: 0 0 18px 0;
            color: rgba(255, 255, 255, 0.8)
        }

        .field {
            display: flex;
            gap: 12px
        }

        .field input[type=text] {
            flex: 1;
            padding: 12px 14px;
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.08);
            background: rgba(255, 255, 255, 0.02);
            color: #fff;
            font-size: 16px
        }

        .btn {
            padding: 12px 18px;
            border-radius: 12px;
            border: none;
            background: linear-gradient(90deg, var(--accent), var(--accent-2));
            color: #fff;
            font-weight: 600;
            cursor: pointer;
            font-size: 15px
        }

        .btn:active {
            transform: translateY(1px)
        }

        /* Right: preview area */
        .preview {
            width: 320px;
            min-width: 240px;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center
        }

        .preview .badge {
            font-weight: 700;
            background: linear-gradient(90deg, #ffd08a, #ff8b98);
            padding: 6px 12px;
            border-radius: 999px;
            color: #2b0a14;
            display: inline-block;
            margin-bottom: 12px
        }

        .greeting-card {
            width: 100%;
            border-radius: 14px;
            padding: 18px;
            background: linear-gradient(180deg, rgba(0, 0, 0, 0.25), rgba(255, 255, 255, 0.02));
            border: 1px solid rgba(255, 255, 255, 0.06)
        }

        .greeting-card h2 {
            margin: 0 0 8px 0;
            font-size: 22px
        }

        .greeting-card p {
            margin: 0;
            color: rgba(255, 255, 255, 0.9)
        }

        /* fullscreen greeting overlay (after submit) */
        .fullscreen-greet {
            position: fixed;
            inset: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 40px;
            z-index: 40
        }

        .greet-inner {
            width: 100%;
            max-width: 920px;
            border-radius: 22px;
            padding: 28px;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.03), rgba(255, 255, 255, 0.02));
            border: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.6);
            display: flex;
            gap: 24px;
            align-items: center;
        }

        .greet-left {
            flex: 1
        }

        .greet-right {
            width: 360px;
            min-width: 240px
        }

        .greet-title {
            font-family: 'Rubik', sans-serif;
            font-size: 36px;
            margin: 0 0 8px 0
        }

        .greet-name {
            font-size: 18px;
            margin: 0 0 20px 0;
            color: rgba(255, 255, 255, 0.9)
        }

        .controls {
            display: flex;
            gap: 10px;
            align-items: center
        }

        .icon-btn {
            background: rgba(255, 255, 255, 0.04);
            border: 1px solid rgba(255, 255, 255, 0.06);
            padding: 10px;
            border-radius: 10px;
            color: #fff;
            cursor: pointer
        }

        /* small responsive */
        @media (max-width:860px) {
            .card {
                flex-direction: column;
                align-items: stretch
            }

            .preview {
                order: -1
            }

            .greet-right {
                width: 100%
            }
        }

        /* subtle floating lights */
        .sparkles {
            position: absolute;
            inset: 0;
            pointer-events: none;
            z-index: -1
        }

        .spark {
            position: absolute;
            border-radius: 50%;
            filter: blur(8px);
            opacity: 0.12
        }

        .spark.a {
            width: 220px;
            height: 220px;
            left: 6%;
            top: 8%;
            background: radial-gradient(circle, #ffd08a, #ff8b98)
        }

        .spark.b {
            width: 180px;
            height: 180px;
            right: 8%;
            bottom: 12%;
            background: radial-gradient(circle, #ffd08a, #ff8b74)
        }

        /* small animation for reveal */
        .fade-up {
            transform: translateY(8px);
            opacity: 0;
            transition: all 420ms cubic-bezier(.2, .8, .2, 1)
        }

        .fade-up.show {
            transform: none;
            opacity: 1
        }
    </style>
</head>

<body>

    <div class="bg-fallback"></div>
    <!-- Background video: replace src with your video file or hosted URL. Use mp4/webm for best support. -->
    <video id="bgVideo" class="bg-video" autoplay muted loop playsinline>
        <source src="assets/diwali-video.mp4" type="video/mp4">
        <!-- fallback image if video not supported -->
    </video>
    <div class="overlay"></div>

    <div class="sparkles">
        <div class="spark a"></div>
        <div class="spark b"></div>
    </div>

    <main class="container">
        <div class="card fade-up" id="landingCard">
            <div class="form-area">
                <div class="title">рк╣рлЗрккрлА ркжрк┐рк╡рк╛рк│рлА!</div>
                <div class="subtitle">ркдркорк╛рк░рлБркВ ркирк╛рко ркжрк╛ркЦрк▓ ркХрк░рлЛ ркЕркирлЗ ркЦрк╛рк╕ рк╢рлБркнрлЗркЪрлНркЫрк╛ ркорлЗрк│рк╡рлЛ</div>

                <form id="nameForm" onsubmit="return false;">
                    <div class="field">
                        <input id="nameInput" type="text" placeholder="ркдркорк╛рк░рлБркВ ркирк╛рко рк▓ркЦрлЛ..." aria-label="name" required>
                        <button class="btn" id="startBtn">рк╢рк░рлВ ркХрк░рлАркП</button>
                    </div>
                </form>

                <p style="margin-top:12px;color:rgba(255,255,255,0.75);font-size:14px">Note: рк╕ркВркЧрлАркд ркЕркирлЗ рк╡рк┐ркбрк┐ркУ ркдркорк╛рк░рлА
                    рккрк░ркорлАрк╢рки рккркЫрлА ркЪрк╛рк▓рлБ ркерк╢рлЗ.</p>
            </div>

            <div class="preview">
                <div class="badge">ркЧрк╛ркпркб рк╕рк░рлНрк╡рк┐рк╕</div>
                <div class="greeting-card">
                    <h2>рк╕рк╛рк▓рк╛ркорлБркмрк╛рк░ркХ</h2>
                    <p id="previewText">ркЖ ркЧрлНрк░рлАркЯрк┐ркВркЧ ркХрк╛рк░рлНркб рккрлАрк░рк╕рк╡рк╛ ркорк╛ркЯрлЗ ркдрлИркпрк╛рк░ ркЫрлЗ. ркдркорк╛рк░рлБркВ ркирк╛рко ркЙркорлЗрк░рлЛ ркЕркирлЗ ркЙркЬрк╡ркгрлА рк╢рк░рлВ ркХрк░рлЛ!</p>
                </div>

                <div style="margin-top:12px;display:flex;gap:8px;width:100%;justify-content:center">
                    <button class="icon-btn" id="muteToggle" title="Mute / Unmute">ЁЯФЗ ркорк┐ркирк┐ркЯ</button>
                    <button class="icon-btn" id="replayBtn" title="Replay video">ЁЯФБ рк░рлАрккрлНрк▓рлЗ</button>
                </div>
            </div>
        </div>
    </main>

    <!-- Fullscreen greeting after name submit -->
    <div id="greetOverlay" class="fullscreen-greet" style="display:none">
        <div class="greet-inner">
            <div class="greet-left">
                <div class="greet-badge" style="font-size:13px;color:var(--accent);font-weight:700;margin-bottom:10px">
                    рк╣рлЗрккрлА ркжрк┐рк╡рк╛рк│рлА тАв рк╢рлБркнрлЗркЪрлНркЫрк╛ркУ</div>
                <h1 class="greet-title">тЬи рк╕рк▓рк╛ркорлБркмрк╛рк░ркХ</h1>
                <div class="greet-name" id="greetName">рккрлНрк░рк┐ркп ркорк┐ркдрлНрк░</div>
                <p style="margin-bottom:16px">ркЖ рк╢рлБркн рккрлНрк░рк╕ркВркЧ рккрк░ ркЖрккркирлЗ рк╣рлГркжркпрккрлВрк░рлНрк╡ркХ рк╢рлБркнрлЗркЪрлНркЫрк╛ркУ. ркжрк┐рк╡рк╛рк│рлАркП ркдркорк╛рк░рк╛ ркЬрлАрк╡ркиркорк╛ркВ ркЙркЬрк╛рк╕ ркЕркирлЗ
                    рк╕рклрк│ркдрк╛ рк▓рк╛рк╡рлЗ.</p>
                <div class="controls">
                    <button class="btn" id="openShare">рк╢рлЗрк░ ркХрк░рлЛ</button>
                    <button class="icon-btn" id="closeGreet">тЬЦ ркмркВркз ркХрк░рлЛ</button>
                </div>
            </div>
            <div class="greet-right">
                <div style="border-radius:12px;overflow:hidden;position:relative">
                    <!-- small looping video in card -->
                    <video id="cardVideo" src="assets/diwali-video.mp4" playsinline loop muted
                        style="width:100%;height:100%;object-fit:cover"></video>
                </div>
                <div style="display:flex;gap:8px;margin-top:12px;justify-content:center">
                    <button class="icon-btn" id="musicToggle">тЦ╢я╕П рк╕ркВркЧрлАркд ркЪрк╛рк▓рлБ</button>
                    <button class="icon-btn" id="downloadCard">тмЗя╕П ркбрк╛ркЙркирк▓рлЛркб</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Audio element (music) -->
    <audio id="bgAudio" loop src="assets/diwali-music.mp3"></audio>

    <!-- Replace the existing <script> ... </script> with this improved script -->
    <script>
        // elements
        const nameForm = document.getElementById('nameForm');
        const nameInput = document.getElementById('nameInput');
        const startBtn = document.getElementById('startBtn');
        const previewText = document.getElementById('previewText');
        const greetOverlay = document.getElementById('greetOverlay');
        const greetName = document.getElementById('greetName');
        const closeGreet = document.getElementById('closeGreet');
        const bgVideo = document.getElementById('bgVideo');
        const cardVideo = document.getElementById('cardVideo');
        const bgAudio = document.getElementById('bgAudio');
        const musicToggle = document.getElementById('musicToggle');
        const muteToggle = document.getElementById('muteToggle');
        const replayBtn = document.getElementById('replayBtn');

        // ensure start button won't submit the form (prevents reload)
        if (startBtn) startBtn.setAttribute('type', 'button');

        function cleanName(s) {
            return String(s || '').trim().replace(/</g, '&lt;').replace(/>/g, '&gt;');
        }

        // live preview
        nameInput.addEventListener('input', () => {
            const v = cleanName(nameInput.value);
            previewText.textContent = v ? `ркЖ ркЧрлНрк░рлАркЯрк┐ркВркЧ ${v} ркорк╛ркЯрлЗ ркЫрлЗ тАФ ркдрлИркпрк╛рк░ ркЫрлЗ!` : 'ркЖ ркЧрлНрк░рлАркЯрк┐ркВркЧ ркХрк╛рк░рлНркб рккрлАрк░рк╕рк╡рк╛ ркорк╛ркЯрлЗ ркдрлИркпрк╛рк░ ркЫрлЗ. ркдркорк╛рк░рлБркВ ркирк╛рко ркЙркорлЗрк░рлЛ ркЕркирлЗ ркЙркЬрк╡ркгрлА рк╢рк░рлВ ркХрк░рлЛ!';
        });

        // safer form submit handler
        startBtn.addEventListener('click', (e) => {
            try {
                e?.preventDefault?.(); // safety
            } catch (err) { /* ignore */ }

            const v = cleanName(nameInput.value);
            if (!v) {
                nameInput.focus();
                // small visual shake feedback
                nameInput.style.animation = 'shake 300ms';
                setTimeout(() => nameInput.style.animation = '', 300);
                return;
            }

            // save and show greet
            localStorage.setItem('diwaliName', v);
            greetName.textContent = `${v} тАФ ркЖрккркирлЗ ркЦрлВркм ркЦрлВркм рк╢рлБркнрлЗркЪрлНркЫрк╛ркУ`;

            // make overlay visible and ensure it's topmost
            greetOverlay.style.display = 'flex';
            greetOverlay.style.zIndex = 9999;
            // add show class for animation
            const inner = greetOverlay.querySelector('.greet-inner');
            if (inner) {
                inner.classList.add('fade-up', 'show');
            }

            // try to play audio/video (allowed because of user interaction)
            bgAudio.play().catch(err => console.warn('audio play failed:', err));
            if (cardVideo) { cardVideo.play().catch(() => { }); }
        });

        // close overlay
        closeGreet.addEventListener('click', () => {
            try {
                greetOverlay.style.display = 'none';
                bgAudio.pause();
                const inner = greetOverlay.querySelector('.greet-inner');
                if (inner) inner.classList.remove('fade-up', 'show');
            } catch (err) { console.warn(err); }
        });

        // music toggle
        musicToggle.addEventListener('click', () => {
            if (!bgAudio) return;
            if (bgAudio.paused) {
                bgAudio.play().catch(err => console.warn('play failed', err));
                musicToggle.textContent = 'тП╕я╕П рк╕ркВркЧрлАркд ркмркВркз ркХрк░рлЛ';
            } else {
                bgAudio.pause();
                musicToggle.textContent = 'тЦ╢я╕П рк╕ркВркЧрлАркд ркЪрк╛рк▓рлБ';
            }
        });

        // mute toggle for background video
        muteToggle.addEventListener('click', () => {
            if (!bgVideo) return;
            bgVideo.muted = !bgVideo.muted;
            muteToggle.textContent = bgVideo.muted ? 'ЁЯФЗ ркорк┐ркирк┐ркЯ' : 'ЁЯФК ркЕркиркорлНркпрлВркЯ';
        });

        // replay
        replayBtn.addEventListener('click', () => {
            if (bgVideo) { bgVideo.currentTime = 0; bgVideo.play().catch(() => { }); }
        });

        // restore saved name
        window.addEventListener('load', () => {
            const saved = localStorage.getItem('diwaliName');
            if (saved) {
                nameInput.value = saved;
                previewText.textContent = `ркЖ ркЧрлНрк░рлАркЯрк┐ркВркЧ ${saved} ркорк╛ркЯрлЗ ркЫрлЗ тАФ ркдрлИркпрк╛рк░ ркЫрлЗ!`;
            }
            // small reveal animation for card
            setTimeout(() => { const el = document.querySelector('.fade-up'); if (el) el.classList.add('show'); }, 120);
        });

        // keyboard Enter should trigger the button, not a form submit reload
        nameInput.addEventListener('keydown', (ev) => {
            if (ev.key === 'Enter') { ev.preventDefault(); startBtn.click(); }
        });

        // Optional: report errors to console clearly
        window.addEventListener('error', (ev) => {
            console.error('Page error:', ev.error || ev.message);
        });

        // small shake keyframes (inject if not present)
        const style = document.createElement('style');
        style.textContent = `@keyframes shake{ 0%{transform:translateX(0)} 25%{transform:translateX(-6px)} 50%{transform:translateX(6px)} 75%{transform:translateX(-4px)} 100%{transform:translateX(0)} }`;
        document.head.appendChild(style);
    </script>

</body>

</html>